# 3-2 ERå›³

## æ¦‚è¦
ç ”ä¿®ç”Ÿç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹é€ ã‚’è¦–è¦šçš„ã«è¡¨ç¾ã—ãŸERå›³ï¼ˆEntity Relationship Diagramï¼‰ã§ã™ã€‚

## ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ç‰ˆERå›³

**ğŸ“Š dbdiagram.io**: [https://dbdiagram.io/d/68adc7561e7a611967b0b2ba](https://dbdiagram.io/d/68adc7561e7a611967b0b2ba)

- ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã¨ã®å…±æœ‰ãƒ»ç·¨é›†ãŒå¯èƒ½
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ã®æ§‹é€ å¤‰æ›´ç¢ºèª
- SQLå‡ºåŠ›æ©Ÿèƒ½ä»˜ã

---

## Mermaid ERå›³

```mermaid
erDiagram
    users ||--o{ user_skills : "has"
    users ||--o{ user_tags : "has"
    
    users {
        bigint id PK
        varchar name
        varchar email UK
        varchar phone_number
        varchar category
        varchar status
        boolean newsletter_agreement
        timestamp created_at
        timestamp updated_at
        timestamp deleted_at
    }
    
    user_skills {
        bigint id PK
        bigint user_id FK
        varchar skill_name
        integer skill_level
        integer experience_years
        text notes
        timestamp created_at
        timestamp updated_at
        timestamp deleted_at
    }
    
    user_tags {
        bigint id PK
        bigint user_id FK
        varchar tag_name
        timestamp created_at
        timestamp deleted_at
    }
```

---

## ãƒ†ãƒ¼ãƒ–ãƒ«é–¢ä¿‚æ€§

### **1. users â† user_skillsï¼ˆ1å¯¾å¤šï¼‰**
- 1äººã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è¤‡æ•°ã®ã‚¹ã‚­ãƒ«ã‚’æŒã¤ã“ã¨ãŒã§ãã‚‹
- CASCADE DELETEè¨­å®šã«ã‚ˆã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼å‰Šé™¤æ™‚ã«ã‚¹ã‚­ãƒ«ã‚‚è«–ç†å‰Šé™¤ã•ã‚Œã‚‹

### **2. users â† user_tagsï¼ˆ1å¯¾å¤šï¼‰**
- 1äººã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯æœ€å¤§4å€‹ã¾ã§ã®ã‚¿ã‚°ã‚’æŒã¤ã“ã¨ãŒã§ãã‚‹
- CASCADE DELETEè¨­å®šã«ã‚ˆã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼å‰Šé™¤æ™‚ã«ã‚¿ã‚°ã‚‚è«–ç†å‰Šé™¤ã•ã‚Œã‚‹

---

## åˆ¶ç´„äº‹é …

### **å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„**
- `user_skills.user_id â†’ users.id`
- `user_tags.user_id â†’ users.id`

### **ãƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„**
- `users.email`ï¼ˆè«–ç†å‰Šé™¤ã‚’è€ƒæ…®ã—ãŸéƒ¨åˆ†ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼‰
- `user_tags(user_id, tag_name)`ï¼ˆåŒä¸€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®é‡è¤‡ã‚¿ã‚°é˜²æ­¢ï¼‰

### **ãƒã‚§ãƒƒã‚¯åˆ¶ç´„**
- `user_skills.skill_level`: 0-5ã®ç¯„å›²
- `user_skills.experience_years`: 0ä»¥ä¸Š
- `users.status`: 'æœ‰åŠ¹' ã¾ãŸã¯ 'ç„¡åŠ¹'

---

## è«–ç†å‰Šé™¤ãƒ‘ã‚¿ãƒ¼ãƒ³

å…¨ãƒ†ãƒ¼ãƒ–ãƒ«ã«`deleted_at`ã‚«ãƒ©ãƒ ã‚’å®Ÿè£…ï¼š
- `NULL`: ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªãƒ¬ã‚³ãƒ¼ãƒ‰
- `TIMESTAMP`: è«–ç†å‰Šé™¤ã•ã‚ŒãŸãƒ¬ã‚³ãƒ¼ãƒ‰ï¼ˆå‰Šé™¤æ—¥æ™‚ï¼‰

**ãƒ¡ãƒªãƒƒãƒˆ**:
- ãƒ‡ãƒ¼ã‚¿ã®å®Œå…¨æ€§ç¶­æŒ
- å‰Šé™¤å±¥æ­´ã®è¿½è·¡å¯èƒ½
- èª¤å‰Šé™¤ã‹ã‚‰ã®å¾©æ—§å¯¾å¿œ

---

## ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æˆ¦ç•¥

### **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–**
- è«–ç†å‰Šé™¤ã‚’è€ƒæ…®ã—ãŸéƒ¨åˆ†ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
- æ¤œç´¢é »åº¦ã®é«˜ã„ã‚«ãƒ©ãƒ ã¸ã®è¤‡åˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
- N+1å•é¡Œå¯¾ç­–ã®ãƒãƒƒãƒã‚¯ã‚¨ãƒªå®Ÿè£…

è©³ç´°ãªã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹å®šç¾©ã¯ [3-1-ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©æ›¸.md](./3-1-ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©æ›¸.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

---

## æ›´æ–°å±¥æ­´

| æ›´æ–°æ—¥ | å¤‰æ›´å†…å®¹ | æ›´æ–°è€… |
|--------|---------|--------|
| 2025-08-26 | åˆç‰ˆä½œæˆã€dbdiagram.ioãƒªãƒ³ã‚¯è¿½åŠ  | é–‹ç™ºãƒãƒ¼ãƒ  |

---

## å‚è€ƒè³‡æ–™

- **ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©**: [3-1-ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©æ›¸.md](./3-1-ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©æ›¸.md)
- **ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ç·¨é›†**: [dbdiagram.io](https://dbdiagram.io/d/68adc7561e7a611967b0b2ba)
- **Spring Data JPA**: [å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://spring.io/projects/spring-data-jpa)