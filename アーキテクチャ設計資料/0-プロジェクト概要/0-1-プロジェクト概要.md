	
---

## 0. 目的・前提

- **FR-001**：研修生が CRUD に加え、INNER JOIN と OUTER JOIN SQL を用いたデータ取得処理、および画面入力制御（プルダウン／リストボックス／チェックボックス／ラジオ）を自力で実装できること。
    
- **FR-002**：対象は「エントリ」データ（※本プロジェクトで扱う汎用レコード。ID・名前・メール等の属性を持つ一意データ）の登録・一覧・詳細・更新・削除。
    
- **NFR-001**：最小構成でシンプル。
    
- **NFR-002**：全てのビジネスロジック層およびデータアクセス層において、例外発生時は `try-catch` を用いたエラーハンドリングを実装すること。
    
- **NFR-003**：例外発生時には、ユーザーにわかりやすいエラーメッセージを返すこと（内部のスタックトレースや機密情報は表示しない）。
    
- **NFR-004**：予期しない例外は必ずログに記録し、原因調査が可能な状態にすること。
    

## 1. 用語・データモデル（UI対象エンティティ）

- **エンティティ名**：Entry（エントリ）
- **概要**：本システムのCRUD対象。カテゴリ／ステータスはマスタ参照、タグは多対多。

| コード | 項目名               | 型 / 形式                | UI制御                       | 保存先 / 備考 |
| :---: | -------------------- | ------------------------ | ---------------------------- | ------------- |
| ATTR-001 | id                | 数値（自動採番）         | 画面非入力（表示のみ）       | `entries.id` |
| ATTR-002 | name              | 文字列（最大50）         | テキスト                     | `entries.name` |
| ATTR-003 | email             | 文字列（メール形式, ≤255）| テキスト                     | `entries.email`（一意） |
| ATTR-004 | category          | 列挙（General/VIP/Internal） | プルダウン（マスタ参照）   | `entries.category_id`（`categories.id`） |
| ATTR-005 | status            | 列挙（Active/Inactive）  | ラジオ/プルダウン（マスタ参照） | `entries.status_id`（`statuses.id`） |
| ATTR-006 | tags              | 複数選択（0〜4）         | リストボックス複数選択       | `entry_tags(entry_id, tag_id)` |
| ATTR-007 | agreeNewsletter   | 真偽値（boolean）        | チェックボックス             | `entries.agree_newsletter`（未入力時FALSE） |
| ATTR-008 | createdAt         | 日時（表示のみ）         | 画面非入力（表示のみ）       | `entries.created_at` |
| ATTR-009 | updatedAt         | 日時（表示のみ）         | 画面非入力（表示のみ）       | `entries.updated_at` |

> **備考**  
> - マスタ/関連：`categories`・`statuses`・`tags`・`entry_tags`・`notes` の詳細は **テーブル定義書** を参照。  
> - JOIN方針：`categories/statuses` は **INNER JOIN**、`tags/notes` は **LEFT OUTER JOIN**（一覧・詳細表示時）。


## 2. 機能要件（CRUD）

- **FR-020**：登録（Create）… 新規エントリを登録。
    
- **FR-021**：一覧（Read-List）… ページング・検索（name, emailの部分一致）。
    
- **FR-022**：詳細（Read-Detail）… 単一エントリの表示、削除実行。
    
- **FR-023**：更新（Update）… 編集専用画面で更新。
    
- **FR-024**：削除（Delete）… 詳細画面または一覧行の削除ボタンから実行。
    

## 3. 画面一覧（ページ構成）

- **UI-001**：登録画面（RegisterPage）※“ユーザー登録ではない”データ登録画面
    
- **UI-002**：一覧画面（ListPage）
    
- **UI-003**：詳細画面（DetailPage）※削除ボタンあり（確認ダイアログ必須）
    
- **UI-004**：更新画面（UpdatePage）
    
- **UI-005**：削除確認（Dialog）
    

## 4. 画面項目仕様

### 4.1 登録画面 [UI-001]

- **入力項目**
    
    - UI-001-01：名前（テキスト）
        
    - UI-001-02：メール（テキスト：メール形式）
        
    - UI-001-03：カテゴリ（プルダウン：General / VIP / Internal）
        
    - UI-001-04：ステータス（ラジオ：Active / Inactive）
        
    - UI-001-05：タグ（リストボックス複数選択：“A”“B”“C”“D”）
        
    - UI-001-06：ニュースレター同意（チェックボックス）
        
- **操作**
    
    - UI-001-10：登録ボタン（submit）／クリアボタン（リセット）／一覧へ戻る
        
- **バリデーション**
    
    - VAL-001：名前 必須・最大50
        
    - VAL-002：メール 必須・形式
        
    - VAL-003：カテゴリ 必須
        
    - VAL-004：ステータス 必須
        
    - VAL-005：タグ 0個以上選択可（上限4）
        

### 4.2 一覧画面 [UI-002]

- **表示列**：ID／名前／メール／カテゴリ／ステータス／作成日／更新日／詳細ボタン／削除ボタン
    
- **検索・操作**
    
    - UI-002-10：検索欄（名前・メールの部分一致）／カテゴリフィルタ（プルダウン）／ステータスフィルタ（ラジオ：All/Active/Inactive）
        
    - UI-002-11：新規登録へ（RegisterPage）
        
    - UI-002-12：各行に詳細・削除ボタン（削除は確認ダイアログ必須）
        
- **ページング**
    
    - UI-002-20：1ページ10件を想定（拡張可）
        

### 4.3 詳細画面[UI-003]

- **表示項目（編集不可）**
    
    - UI-003-01：ID／作成日／更新日
        
    - UI-003-02：名前／メール／カテゴリ／ステータス／タグ／ニュースレター同意
        
- **操作**
    
    - UI-003-10：編集へ（UpdatePage）
        
    - UI-003-11：削除（確認ダイアログ → 一覧へ）
        
    - UI-003-12：一覧へ戻る
        

### 4.4 更新画面[UI-004]

- **入力項目（登録 と同一構成、初期値は現値）**
    
    - UI-004-01：ID（ラベル・編集不可）
        
    - UI-004-02：名前（テキスト）
        
    - UI-004-03：メール（テキスト：メール形式）
        
    - UI-004-04：カテゴリ（プルダウン）
        
    - UI-004-05：ステータス（ラジオ）
        
    - UI-004-06：タグ（リストボックス複数選択）
        
    - UI-004-07：ニュースレター同意（チェックボックス）
        
- **操作**
    
    - UI-004-10：更新ボタン／キャンセル（詳細へ戻る）
        
- **バリデーション**
    
    - VAL-001〜VAL-005 を準用
        

## 5. 画面遷移（簡易）

- NAV-001：一覧 → 登録
    
- NAV-002：一覧 → 詳細
    
- NAV-003：詳細 → 更新／削除（削除後は一覧）
    
- NAV-004：登録完了 → 詳細（作成したID）または一覧
    
- NAV-005：更新完了 → 詳細
    

## 6. エラーメッセージ仕様（例）

- ERR-001：必須未入力：「{項目名}は必須です」
    
- ERR-002：形式不正：「{項目名}の形式が正しくありません」
    
- ERR-003：重複エラー（email一意制約想定）：「このメールは既に使用されています」
    
- ERR-004：削除不可（参照制約が将来追加された場合）


## 7 テーブル定義

    本システムで使用する主要テーブルは以下の通り。

- **categories（カテゴリ・マスタ）**  
    エントリのカテゴリ種別を管理する。
    
- **statuses（ステータス・マスタ）**  
    エントリの状態を管理する。
    
- **tags（タグ・マスタ）**  
    エントリに付与可能なタグを管理する。
    
- **entries（エントリ本体）**  
    登録対象データの本体情報を保持する。
    
- **entry_tags（エントリ×タグ）**  
    エントリとタグの関連（多対多）を管理する。
    
- **notes（任意ノート）**  
    エントリに紐づく任意メモ情報を管理する。
    
- **audit_logs（監査ログ）**  
    操作履歴やエラー情報を記録する。
    

## 8. API/I/F（参考：REST想定）

- API-001：POST /api/entries（登録）
    
- API-002：GET /api/entries?query=&category=&status=&page=1&size=10（一覧）
    
- API-003：GET /api/entries/{id}（詳細）
    
- API-004：PUT /api/entries/{id}（更新）
    
- API-005：DELETE /api/entries/{id}（削除）


## 9 テスト観点

- TST-001：全入力コントロールの双方向バインド（初期値→更新→再表示）
    
- TST-002：VALルール（必須・最大長・メール形式）
    
- TST-003：検索・フィルタ・ページングの組合せ
    
- TST-004：削除確認とキャンセル動作
    
- TST-005：email一意制約でのエラーハンドリング
    
- **TST-006**：例外発生時に try-catch が正しく動作し、NFR-003 の要件通りユーザー向けメッセージが表示されること
    
- **TST-007**：予期しない例外がログ出力され、スタックトレースや機密情報がユーザーに表示されないこと
    

## 10. スキルレベル定義（0〜5）

- **Level 0**：JUnit テストケース作成まで完了できる。
    
- **Level 1**：更新（修正）画面の実装まで完了できる。
    
- **Level 2**：削除画面の実装まで完了できる。
    
- **Level 3**：一覧画面の実装まで完了できる。
    
- **Level 4**：登録画面の実装まで完了できる。
    
- **Level 5**：登録画面すら完了できない。

- ---
